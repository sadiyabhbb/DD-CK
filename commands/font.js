const axios = require('axios'); 
const path = require('path');

module.exports.config = {
    name: 'font',
    credits: 'LIKHON X TISHA',
    aliases: ['fnt'],
    prefix: true,
    permission: 0, 
    description: 'Converts text into different stylish fonts.',
    tags: ["utility"]
};

const fontMaps = [
    {
      name: 'a',
      displayName: 'Monospace Sans',
      map: {
        'a':'ğšŠ','b':'ğš‹','c':'ğšŒ','d':'ğš','e':'ğš','f':'ğš','g':'ğš','h':'ğš‘','i':'ğš’','j':'ğš“','k':'ğš”',
        'l':'ğš•','m':'ğš–','n':'ğš—','o':'ğš˜','p':'ğš™','q':'ğšš','r':'ğš›','s':'ğšœ','t':'ğš','u':'ğš','v':'ğšŸ',
        'w':'ğš ','x':'ğš¡','y':'ğš¢','z':'ğš£','A':'ğ™°','B':'ğ™±','C':'ğ™²','D':'ğ™³','E':'ğ™´','F':'ğ™µ','G':'ğ™¶',
        'H':'ğ™·','I':'ğ™¸','J':'ğ™¹','K':'ğ™º','L':'ğ™»','M':'ğ™¼','N':'ğ™½','O':'ğ™¾','P':'ğ™¿','Q':'ğš€','R':'ğš',
        'S':'ğš‚','T':'ğšƒ','U':'ğš„','V':'ğš…','W':'ğš†','X':'ğš‡','Y':'ğšˆ','Z':'ğš‰','1':'ğŸ·','2':'ğŸ¸','3':'ğŸ¹',
        '4':'ğŸº','5':'ğŸ»','6':'ğŸ¼','7':'ğŸ½','8':'ğŸ¾','9':'ğŸ¿','0':'ğŸ¶',' ':' '
      }
    },
    {
      name: 'b',
      displayName: 'Double-Struck',
      map: {
        'a':'ğ•’','b':'ğ•“','c':'ğ•”','d':'ğ••','e':'ğ•–','f':'ğ•—','g':'ğ•˜','h':'ğ•™','i':'ğ•š','j':'ğ•›','k':'ğ•œ',
        'l':'ğ•','m':'ğ•','n':'ğ•Ÿ','o':'ğ• ','p':'ğ•¡','q':'ğ•¢','r':'ğ•£','s':'ğ•¤','t':'ğ•¥','u':'ğ•¦','v':'ğ•§',
        'w':'ğ•¨','x':'ğ•©','y':'ğ•ª','z':'ğ•«','A':'ğ”¸','B':'ğ”¹','C':'â„‚','D':'ğ”»','E':'ğ”¼','F':'ğ”½','G':'ğ”¾',
        'H':'â„','I':'ğ•€','J':'ğ•','K':'ğ•‚','L':'ğ•ƒ','M':'ğ•„','N':'â„•','O':'ğ•†','P':'â„™','Q':'â„š','R':'â„',
        'S':'ğ•Š','T':'ğ•‹','U':'ğ•Œ','V':'ğ•','W':'ğ•','X':'ğ•','Y':'ğ•','Z':'â„¤','1':'ğŸ™','2':'ğŸš','3':'ğŸ›',
        '4':'ğŸœ','5':'ğŸ','6':'ğŸ','7':'ğŸŸ','8':'ğŸ ','9':'ğŸ¡','0':'ğŸ˜',' ':' '
      }
    },
    {
      name: 'c',
      displayName: 'Bold Sans',
      map: {
        'a':'ğ—®','b':'ğ—¯','c':'ğ—°','d':'ğ—±','e':'ğ—²','f':'ğ—³','g':'ğ—´','h':'ğ—µ','i':'ğ—¶','j':'ğ—·','k':'ğ—¸',
        'l':'ğ—¹','m':'ğ—º','n':'ğ—»','o':'ğ—¼','p':'ğ—½','q':'ğ—¾','r':'ğ—¿','s':'ğ˜€','t':'ğ˜','u':'ğ˜‚','v':'ğ˜ƒ',
        'w':'ğ˜„','x':'ğ˜…','y':'ğ˜†','z':'ğ˜‡','A':'ğ—”','B':'ğ—•','C':'ğ—–','D':'ğ——','E':'ğ—˜','F':'ğ—™','G':'ğ—š',
        'H':'ğ—›','I':'ğ—œ','J':'ğ—','K':'ğ—','L':'ğ—Ÿ','M':'ğ— ','N':'ğ—¡','O':'ğ—¢','P':'ğ—£','Q':'ğ—¤','R':'ğ—¥',
        'S':'ğ—¦','T':'ğ—§','U':'ğ—¨','V':'ğ—©','W':'ğ—ª','X':'ğ—«','Y':'ğ—¬','Z':'ğ—­','1':'ğŸ­','2':'ğŸ®','3':'ğŸ¯',
        '4':'ğŸ°','5':'ğŸ±','6':'ğŸ²','7':'ğŸ³','8':'ğŸ´','9':'ğŸµ','0':'ğŸ¬',' ':' '
      }
    },
    {
      name: 'd',
      displayName: 'Italic Serif + Emojis',
      map: {
        'a':'ğ‘','b':'ğ‘','c':'ğ‘','d':'ğ‘‘','e':'ğ‘’','f':'ğ‘“','g':'ğ‘”','h':'ğ’‰','i':'ğ’Š','j':'ğ’‹','k':'ğ’Œ',
        'l':'ğ’','m':'ğ’','n':'ğ’','o':'ğ’','p':'ğ’‘','q':'ğ’’','r':'ğ’“','s':'ğ’”','t':'ğ’•','u':'ğ’–','v':'ğ’—',
        'w':'ğ’˜','x':'ğ’™','y':'ğ’š','z':'ğ’›','A':'ğ‘¨','B':'ğ‘©','C':'ğ‘ª','D':'ğ‘«','E':'ğ‘¬','F':'ğ‘­','G':'ğ‘®',
        'H':'ğ‘¯','I':'ğ‘°','J':'ğ‘±','K':'ğ‘²','L':'ğ‘³','M':'ğ‘´','N':'ğ‘µ','O':'ğ‘¶','P':'ğ‘·','Q':'ğ‘¸','R':'ğ‘¹',
        'S':'ğ‘º','T':'ğ‘»','U':'ğ‘¼','V':'ğ‘½','W':'ğ‘¾','X':'ğ‘¿','Y':'ğ’€','Z':'ğ’','1':'1âƒ£','2':'2âƒ£','3':'3âƒ£',
        '4':'4âƒ£','5':'5âƒ£','6':'6âƒ£','7':'7âƒ£','8':'8âƒ£','9':'9âƒ£','0':'0âƒ£',' ':' '
      }
    },
    {
      name: 'e',
      displayName: 'Circled Letters + Numbers',
      map: {
        'a':'ğŸ„°','b':'ğŸ„±','c':'ğŸ„²','d':'ğŸ„³','e':'ğŸ„´','f':'ğŸ„µ','g':'ğŸ„¶','h':'ğŸ„·','i':'ğŸ„¸','j':'ğŸ„¹','k':'ğŸ„º',
        'l':'ğŸ„»','m':'ğŸ„¼','n':'ğŸ„½','o':'ğŸ„¾','p':'ğŸ„¿','q':'ğŸ…€','r':'ğŸ…','s':'ğŸ…‚','t':'ğŸ…ƒ','u':'ğŸ…„','v':'ğŸ……',
        'w':'ğŸ…†','x':'ğŸ…‡','y':'ğŸ…ˆ','z':'ğŸ…‰','A':'ğŸ„°','B':'ğŸ„±','C':'ğŸ„²','D':'ğŸ„³','E':'ğŸ„´','F':'ğŸ„µ','G':'ğŸ„¶',
        'H':'ğŸ„·','I':'ğŸ„¸','J':'ğŸ„¹','K':'ğŸ„º','L':'ğŸ„»','M':'ğŸ„¼','N':'ğŸ„½','O':'ğŸ„¾','P':'ğŸ„¿','Q':'ğŸ…€','R':'ğŸ…',
        'S':'ğŸ…‚','T':'ğŸ…ƒ','U':'ğŸ…„','V':'ğŸ……','W':'ğŸ…†','X':'ğŸ…‡','Y':'ğŸ…ˆ','Z':'ğŸ…‰','1':'â‘ ','2':'â‘¡','3':'â‘¢',
        '4':'â‘£','5':'â‘¤','6':'â‘¥','7':'â‘¦','8':'â‘§','9':'â‘¨','0':'â“ª',' ':' '
      }
    },
    {
      name: 'f',
      displayName: 'Phonetic/Small Caps Mix',
      map: {
        'a':'ÊŒ','b':'É“','c':'c','d':'É—','e':'É˜','f':'Ê†','g':'Ê›','h':'Êœ','i':'É©','j':'j','k':'Ä¸',
        'l':'É­','m':'É±','n':'Å‹','o':'o','p':'p','q':'q','r':'Ê€','s':'s','t':'t','u':'Ê‹','v':'v',
        'w':'w','x':'x','y':'Æ´','z':'z','A':'A','B':'B','C':'C','D':'D','E':'E','F':'F','G':'G',
        'H':'H','I':'I','J':'J','K':'K','L':'L','M':'M','N':'N','O':'O','P':'P','Q':'Q','R':'R',
        'S':'S','T':'T','U':'U','V':'V','W':'W','X':'X','Y':'Y','Z':'Z',' ':' '
      }
    },
    {
      name: 'g',
      displayName: 'Squared Letters + Circled Emojis',
      map: {
        'a':'ğŸ…°','b':'ğŸ…±','c':'ğŸ…²','d':'ğŸ…³','e':'ğŸ…´','f':'ğŸ…µ','g':'ğŸ…¶','h':'ğŸ…·','i':'ğŸ…¸','j':'ğŸ…¹','k':'ğŸ…º',
        'l':'ğŸ…»','m':'ğŸ…¼','n':'ğŸ…½','o':'ğŸ…¾','p':'ğŸ…¿','q':'ğŸ†€','r':'ğŸ†','s':'ğŸ†‚','t':'ğŸ†ƒ','u':'ğŸ†„','v':'ğŸ†…',
        'w':'ğŸ††','x':'ğŸ†‡','y':'ğŸ†ˆ','z':'ğŸ†‰','A':'ğŸ…°','B':'ğŸ…±','C':'ğŸ…²','D':'ğŸ…³','E':'ğŸ…´','F':'ğŸ…µ','G':'ğŸ…¶',
        'H':'ğŸ…·','I':'ğŸ…¸','J':'ğŸ…¹','K':'ğŸ…º','L':'ğŸ…»','M':'ğŸ…¼','N':'ğŸ…½','O':'ğŸ…¾','P':'ğŸ…¿','Q':'ğŸ†€','R':'ğŸ†',
        'S':'ğŸ†‚','T':'ğŸ†ƒ','U':'ğŸ†„','V':'ğŸ†…','W':'ğŸ††','X':'ğŸ†‡','Y':'ğŸ†ˆ','Z':'ğŸ†‰','1':'â¶','2':'â·','3':'â¸',
        '4':'â¹','5':'âº','6':'â»','7':'â¼','8':'â½','9':'â¾','0':'â“¿',' ':' '
      }
    },
    {
      name: 'h',
      displayName: 'Black Circled Letters + Emojis',
      map: {
        'a':'ğŸ…','b':'ğŸ…‘','c':'ğŸ…’','d':'ğŸ…“','e':'ğŸ…”','f':'ğŸ…•','g':'ğŸ…–','h':'ğŸ…—','i':'ğŸ…˜','j':'ğŸ…™','k':'ğŸ…š',
        'l':'ğŸ…›','m':'ğŸ…œ','n':'ğŸ…','o':'ğŸ…','p':'ğŸ…Ÿ','q':'ğŸ… ','r':'ğŸ…¡','s':'ğŸ…¢','t':'ğŸ…£','u':'ğŸ…¤','v':'ğŸ…¥',
        'w':'ğŸ…¦','x':'ğŸ…§','y':'ğŸ…¨','z':'ğŸ…©','A':'ğŸ…','B':'ğŸ…‘','C':'ğŸ…’','D':'ğŸ…“','E':'ğŸ…”','F':'ğŸ…•','G':'ğŸ…–',
        'H':'ğŸ…—','I':'ğŸ…˜','J':'ğŸ…™','K':'ğŸ…š','L':'ğŸ…›','M':'ğŸ…œ','N':'ğŸ…','O':'ğŸ…','P':'ğŸ…Ÿ','Q':'ğŸ… ','R':'ğŸ…¡',
        'S':'ğŸ…¢','T':'ğŸ…£','U':'ğŸ…¤','V':'ğŸ…¥','W':'ğŸ…¦','X':'ğŸ…§','Y':'ğŸ…¨','Z':'ğŸ…©','1':'â¶','2':'â·','3':'â¸',
        '4':'â¹','5':'âº','6':'â»','7':'â¼','8':'â½','9':'â¾','0':'â“¿',' ':' '
      }
    },
    {
      name: 'i',
      displayName: 'Bold Serif',
      map: {
        'a':'ğš','b':'ğ›','c':'ğœ','d':'ğ','e':'ğ','f':'ğŸ','g':'ğ ','h':'ğ¡','i':'ğ¢','j':'ğ£','k':'ğ¤',
        'l':'ğ¥','m':'ğ¦','n':'ğ§','o':'ğ¨','p':'ğ©','q':'ğª','r':'ğ«','s':'ğ¬','t':'ğ­','u':'ğ®','v':'ğ¯',
        'w':'ğ°','x':'ğ±','y':'ğ²','z':'ğ³','A':'ğ€','B':'ğ','C':'ğ‚','D':'ğƒ','E':'ğ„','F':'ğ…','G':'ğ†',
        'H':'ğ‡','I':'ğˆ','J':'ğ‰','K':'ğŠ','L':'ğ‹','M':'ğŒ','N':'ğ','O':'ğ','P':'ğ','Q':'ğ','R':'ğ‘',
        'S':'ğ’','T':'ğ“','U':'ğ”','V':'ğ•','W':'ğ–','X':'ğ—','Y':'ğ˜','Z':'ğ™','1':'ğŸ','2':'ğŸ','3':'ğŸ‘',
        '4':'ğŸ’','5':'ğŸ“','6':'ğŸ”','7':'ğŸ•','8':'ğŸ–','9':'ğŸ—','0':'ğŸ',' ':' '
      }
    }
];

module.exports.run = async (bot, msg) => {
    const chatId = msg.chat.id;
    const messageId = msg.message_id;
    const args = msg.text.split(/\s+/).slice(1);
    const prefix = global.PREFIX;

    if (args.length === 0) {
        let fontPage = "â˜…â”â”â”â”â”â”â”â”â”â”â”â”â˜…\n";
        fontPage += "       ğŸ”° FONT PAGE ğŸ”°\n";
        fontPage += "â˜…â”â”â”â”â”â”â”â”â”â”â”â”â˜…\n\n";

        fontMaps.forEach(f => {
            const exampleText = "LIKHON 404+";
            const exampleOutput = exampleText.split('').map(c => f.map[c] || c).join('');
            fontPage += `[${f.name.toUpperCase()}] **font ${f.name}** (${f.displayName})\nâ†’ ${exampleOutput}\n\n`;
        });

        fontPage += "â˜…â”â”â”â”â”â”â”â”â”â”â”â”â˜…\n";
        fontPage += `Type ${prefix}font <fontType> <text> to convert text.\n`;
        fontPage += `For example: ${prefix}font a Hello World!\n`;
        fontPage += "â˜…â”â”â”â”â”â”â”â”â”â”â”â”â˜…";

        return bot.sendMessage(chatId, fontPage, { reply_to_message_id: messageId, parse_mode: 'Markdown' });
    }

    const fontType = args.shift().toLowerCase();
    const inputText = args.join(' ');
    const fontMap = fontMaps.find(f => f.name === fontType);

    if (!fontMap) {
        const available = fontMaps.map(f => `\`${f.name}\``).join(', ');
        return bot.sendMessage(chatId, `âŒ Invalid font type \`${fontType}\`. Available types: ${available}\n\nType \`${prefix}font\` for the full list.`, { reply_to_message_id: messageId, parse_mode: 'Markdown' });
    }
    
    if (!inputText) {
         return bot.sendMessage(chatId, `âš ï¸ Please provide text to convert.\nUsage: \`${prefix}font ${fontType} [text]\``, { reply_to_message_id: messageId, parse_mode: 'Markdown' });
    }

    const outputText = inputText.split('').map(c => fontMap.map[c] || c).join('');
    
    const finalMessage = 
        `âœ… Converted to **${fontMap.displayName}** (Type: \`${fontType}\`):\n` +
        `\n${outputText}`;
        
    if (finalMessage.length > 4096) {
         return bot.sendMessage(chatId, "âš ï¸ Converted text is too long to send as a single message.", { reply_to_message_id: messageId });
    }

    return bot.sendMessage(chatId, finalMessage, { reply_to_message_id: messageId, parse_mode: 'Markdown' });
};
